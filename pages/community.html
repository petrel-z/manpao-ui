<!-- 圈子页面 -->
<div class="page" id="community">
    <div class="min-h-full bg-gray-100 pb-16 relative h-[86vh]">
        <!-- 顶部导航栏 -->
        <div class="bg-white flex items-center p-3 shadow-sm">
            <div onclick="showPage('profile')" class="w-8 h-8 flex items-center justify-center cursor-pointer">
                <i class="fas fa-arrow-left text-gray-600"></i>
            </div>
            <div class="text-center flex-1 font-medium">圈子</div>
            <div class="w-8 h-8"></div> <!-- 占位，保持标题居中 -->
        </div>
        
        <!-- 分类选项卡 -->
        <div class="bg-white mb-2">
            <div class="flex justify-around px-2 py-3 border-b">
                <div class="circle-tab active px-5 py-1 text-center rounded-full cursor-pointer" onclick="switchCircleTab(this, 'all')">
                    全部
                </div>
                <div class="circle-tab px-5 py-1 text-center rounded-full cursor-pointer" onclick="switchCircleTab(this, 'hot')">
                    最热
                </div>
                <div class="circle-tab px-5 py-1 text-center rounded-full cursor-pointer" onclick="switchCircleTab(this, 'new')">
                    最新
                </div>
            </div>
        </div>
        
        <!-- 帖子列表 -->
        <div class="px-3 space-y-3 max-h-[66vh] overflow-y-auto custom-scrollbar">
            <!-- 帖子项 1 -->
            <div class="post-item bg-white rounded-lg p-3 shadow-sm" data-category="hot">
                <!-- 用户信息 -->
                <div class="flex justify-between items-center mb-3">
                    <div class="flex items-center">
                        <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=40&h=40&fit=crop&crop=face" 
                             alt="用户头像" class="w-9 h-9 rounded-full object-cover mr-2">
                        <div>
                            <div class="font-medium text-sm">李同学</div>
                            <div class="text-gray-400 text-xs">2小时前</div>
                        </div>
                    </div>
                    <div class="text-gray-400">
                        <i class="fas fa-ellipsis-h"></i>
                    </div>
                </div>
                
                <!-- 帖子内容 -->
                <div class="mb-3">
                    <p class="text-sm mb-2">今天在学校食堂发现了一家新开的奶茶店，味道超赞！强烈推荐大家去尝尝，价格也很实惠，学生专享还有折扣～</p>
                    <!-- 图片网格 -->
                    <div class="grid grid-cols-3 gap-1">
                        <img src="https://images.unsplash.com/photo-1608744940436-5fca4a3c8786?q=80&w=1917&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="奶茶图片" class="w-full h-24 object-cover rounded">
                        <img src="https://images.unsplash.com/photo-1499638673689-79a0b5115d87?w=300" alt="奶茶图片" class="w-full h-24 object-cover rounded">
                        <img src="https://images.unsplash.com/photo-1544787219-7f47ccb76574?w=300" alt="奶茶图片" class="w-full h-24 object-cover rounded">
                    </div>
                </div>
                
                <!-- 互动数据 -->
                <div class="flex justify-between text-gray-500 text-xs border-t pt-3">
                    <div class="flex items-center">
                        <i class="far fa-heart mr-1"></i>
                        <span>128</span>
                    </div>
                    <div class="flex items-center">
                        <i class="far fa-comment mr-1"></i>
                        <span>36</span>
                    </div>
                    <div class="flex items-center">
                        <i class="far fa-share-square mr-1"></i>
                        <span>分享</span>
                    </div>
                </div>
            </div>
            
            <!-- 帖子项 2 -->
            <div class="post-item bg-white rounded-lg p-3 shadow-sm" data-category="new">
                <!-- 用户信息 -->
                <div class="flex justify-between items-center mb-3">
                    <div class="flex items-center">
                        <img src="https://images.unsplash.com/photo-1599566150163-29194dcaad36?w=40&h=40&fit=crop&crop=face" 
                             alt="用户头像" class="w-9 h-9 rounded-full object-cover mr-2">
                        <div>
                            <div class="font-medium text-sm">王同学</div>
                            <div class="text-gray-400 text-xs">30分钟前</div>
                        </div>
                    </div>
                    <div class="text-gray-400">
                        <i class="fas fa-ellipsis-h"></i>
                    </div>
                </div>
                
                <!-- 帖子内容 -->
                <div class="mb-3">
                    <p class="text-sm mb-2">有没有同学知道图书馆今天开门时间？我想去自习，但不确定几点开门。</p>
                </div>
                
                <!-- 互动数据 -->
                <div class="flex justify-between text-gray-500 text-xs border-t pt-3">
                    <div class="flex items-center">
                        <i class="far fa-heart mr-1"></i>
                        <span>12</span>
                    </div>
                    <div class="flex items-center">
                        <i class="far fa-comment mr-1"></i>
                        <span>8</span>
                    </div>
                    <div class="flex items-center">
                        <i class="far fa-share-square mr-1"></i>
                        <span>分享</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 圈子专用底部导航 -->
        <div class=" flex items-center justify-around absolute bottom-0 left-0 right-0 bg-white border-t py-2 shadow-md w-full z-10">
            <div id="circle-nav-square" class="nav-item text-center cursor-pointer" onclick="switchCircleNav('circle-nav-square')">
                <i class="fas fa-th-large text-xl mb-1"></i>
                <div class="text-caption">广场</div>
            </div>
            <div id="circle-nav-message" class="nav-item text-center text-gray-500 cursor-pointer" onclick="switchCircleNav('circle-nav-message')">
                <i class="fas fa-comment-dots text-xl mb-1"></i>
                <div class="text-caption">消息</div>
            </div>
            <div id="circle-nav-profile" class="nav-item text-center text-gray-500 cursor-pointer" onclick="switchCircleNav('circle-nav-profile')">
                <i class="fas fa-user text-xl mb-1"></i>
                <div class="text-caption">我的</div>
            </div>
        </div>
    </div>
</div>

<script>
    /**
     * 切换圈子选项卡
     * @param {HTMLElement} tab - 被点击的选项卡
     * @param {string} category - 选项卡类别
     */
    function switchCircleTab(tab, category) {
        // 移除所有选项卡的活跃状态
        const tabs = document.querySelectorAll('.circle-tab');
        tabs.forEach(t => t.classList.remove('active'));
        
        // 添加当前选项卡的活跃状态
        tab.classList.add('active');
        
        // 根据类别筛选帖子
        const posts = document.querySelectorAll('.post-item');
        if (category === 'all') {
            posts.forEach(post => post.style.display = 'block');
        } else {
            posts.forEach(post => {
                if (post.dataset.category === category) {
                    post.style.display = 'block';
                } else {
                    post.style.display = 'none';
                }
            });
        }
    }
    
    /**
     * 切换圈子底部导航
     * @param {string} navId - 导航项ID
     */
    function switchCircleNav(navId) {
        // 移除所有导航项的活跃状态
        const navItems = document.querySelectorAll('.circle-bottom-nav .nav-item');
        navItems.forEach(item => {
            item.classList.remove('primary-red');
            item.classList.add('text-gray-500');
        });
        
        // 添加当前导航项的活跃状态
        const activeNav = document.getElementById(navId);
        if (activeNav) {
            activeNav.classList.add('primary-red');
            activeNav.classList.remove('text-gray-500');
        }
    }
</script>